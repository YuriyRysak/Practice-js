{"mappings":"AAGA,IACIA,EADAC,EAAc,EAGlB,MAAMC,EAAeC,SAASC,eAAe,iBACvCC,EAAiBF,SAASC,eAAe,YACzCE,EAAcH,SAASC,eAAe,mBACtCG,EAAoBJ,SAASC,eAAe,YAC5CI,EAAsBL,SAASC,eAAe,cA4CpD,SAASK,EAASC,GACd,MAAMC,EAAS,uCAAuCD,6EAAqET,IAE3H,OAAOW,MAAMC,IAAIF,GACbG,MAAKC,GAAOA,EAAIC,OAChBF,MAAK,EAACG,SAACA,EAAQC,aAAEA,MACV,C,SAACD,E,aAAUC,MAElBC,OAAMC,GAASC,QAAQC,IAAIF,I,CAGnC,SAASG,EAAwBN,GAC7B,OAAOA,EAASO,KAAI,EAACC,MAACA,EAAKC,YAAEA,EAAWC,IAAEA,EAAGC,WAAEA,KACtC,qCACDH,sBACCC,4BACKE,WAAoBH,sCACrBE,kEAEVE,KAAK,G,CAaZ,SAASC,IACL,IAAIC,EAAgB,GAEpB,IAAK,IAAIC,EAAI,EAAGA,GAAKhC,EAAYgC,GAAK,EACpCD,GAAiB,iEAAiEC,KAAKA,aAGzF,OAAOD,C,CAOT,SAASE,EAAoBf,GAC3BlB,EAAakC,KAAKC,OAAOjB,EAAe,IAAM,IAAMA,GApGvC,E,CA4Gf,SAASkB,EAAQC,EAAWC,GAC1BD,EAAUE,UAAY,GACtBF,EAAUG,mBAAmB,YAAaF,E,CAnG9CpC,EAAauC,iBAAiB,SAASC,IAClCjC,EAAQH,EAAYqC,OAAO7B,MAAK,EAACG,SAACA,EAAQC,aAAEA,MACzCe,EAAoBf,GACpB,MAAM0B,EAAWrB,EAAuBN,GAClC4B,EAAef,IAErBM,EAAO5B,EAAqBqC,GAC5BT,EAAO7B,EAAmBqC,EAAS,GACpC,IAKPpC,EAAoBiC,iBAAiB,SAASC,IAC1CA,EAAEI,iBACyB,cAAvBJ,EAAEK,OAAOC,YAEb/C,EAAcyC,EAAEK,OAAOE,QAAQC,KAE/BzC,EAAQH,EAAYqC,OAAO7B,MAAK,EAACG,SAACA,EAAQC,aAAEA,MACxCe,EAAoBf,GAEpB,MAAM0B,EAAWrB,EAAuBN,GAClC4B,EAAef,IAErBM,EAAO5B,EAAqBqC,GAC5BT,EAAO7B,EAAmBqC,EAAS,IAErC,IAGNvC,EAAeoC,iBAAiB,SAASC,IACjCzC,EAAcD,IAElBC,EAAckD,OAAOlD,GAAe,EAEpCQ,EAAQH,EAAYqC,OAAO7B,MAAK,EAACG,SAACA,MAChC,MAAM2B,EAAWrB,EAAuBN,GACxCV,EAAkBiC,mBAAmB,YAAaI,EAAS,IAC3D","sources":["src/js/pagination.js"],"sourcesContent":["const API_KEY = '1d289197590b4695af2157c664a54f22';\nconst PageSize = 8;\n\nlet currentPage = 1;\nlet totalPages = undefined;\n\nconst searchBtnRef = document.getElementById('searchControl');\nconst loadMoreBtnRef = document.getElementById('loadMore');\nconst searchField = document.getElementById('searchNameField');\nconst articlesContainer = document.getElementById('articles');\nconst paginationContainer = document.getElementById('pagination');\n\nsearchBtnRef.addEventListener('click', e => {\n     getNews(searchField.value).then(({articles, totalResults}) => {\n        calculatePagination(totalResults);\n        const elements = createArticlesElements(articles);\n        const pageElements = createPagesElements();\n\n        render(paginationContainer, pageElements);\n        render(articlesContainer, elements);\n     });\n\n    \n});\n\npaginationContainer.addEventListener('click', e => {\n    e.preventDefault();\n    if (e.target.className !== \"page-link\") return\n\n    currentPage = e.target.dataset.page;\n\n    getNews(searchField.value).then(({articles, totalResults}) => {\n        calculatePagination(totalResults)\n\n        const elements = createArticlesElements(articles);\n        const pageElements = createPagesElements();\n\n        render(paginationContainer, pageElements);\n        render(articlesContainer, elements);\n\n    });\n})\n\nloadMoreBtnRef.addEventListener('click', e => {\n    if (currentPage > totalPages) return\n\n    currentPage = Number(currentPage) + 1;\n\n    getNews(searchField.value).then(({articles}) => {\n      const elements = createArticlesElements(articles);\n      articlesContainer.insertAdjacentHTML('beforeend', elements);\n    });\n})\n\nfunction getNews (query) {\n    const urlAPI = `https://newsapi.org/v2/everything?q=${query}&from=2022-12-01&apiKey=${API_KEY}&pageSize=${PageSize}&page=${currentPage}`;\n\n    return axios.get(urlAPI)\n       .then(res => res.data)\n       .then(({articles, totalResults}) => {\n        return {articles, totalResults}\n       })\n       .catch(error => console.log(error))\n}\n\nfunction createArticlesElements (articles) {\n    return articles.map(({title, description, url, urlToImage}) => {\n      return `<article class=\"news\">\n      <h2>${title}</h2>\n      <div>${description}</div>\n      <img src=\"${urlToImage}\" alt=\"${title}\" loading=\"lazy\">\n      <a href=\"${url}\" class=\"news-link\" target=\"_blank\">more</a>\n    </article>`;\n    }).join('');\n  }\n\n// function calculatePagination(totalResults) {\n//     totalPages = Math.ceil(totalResults / PageSize)\n//     renderPagination()\n\n// }\n\n/**\n * createPagesElements\n * @returns {string} Рядок з елементами кнопок пагінації\n */\nfunction createPagesElements () {\n    let pagesElements = '';\n    \n    for (let i = 1; i <= totalPages; i += 1 ) {\n      pagesElements += `<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data-page=${i}>${i}</a></li>`\n    }\n  \n    return pagesElements\n  }\n  \n  /**\n   * calculatePagination. Підраховує кількість сторінок\n   * @param {Number} totalResults \n   */\n  function calculatePagination(totalResults) {\n    totalPages = Math.floor((totalResults > 100 ? 100 : totalResults) / PageSize)\n  }\n  \n  /**\n   * Очищає контейнер і вставляє туди новий контент\n   * @param {HTMLElement} container \n   * @param {String} content \n   */\n  function render (container, content) {\n    container.innerHTML = '';\n    container.insertAdjacentHTML('beforeend', content)\n  }\n\n\n"],"names":["$1bab9c519cfa82bc$var$totalPages","$1bab9c519cfa82bc$var$currentPage","$1bab9c519cfa82bc$var$searchBtnRef","document","getElementById","$1bab9c519cfa82bc$var$loadMoreBtnRef","$1bab9c519cfa82bc$var$searchField","$1bab9c519cfa82bc$var$articlesContainer","$1bab9c519cfa82bc$var$paginationContainer","$1bab9c519cfa82bc$var$getNews","query","urlAPI","axios","get","then","res","data","articles","totalResults","catch","error","console","log","$1bab9c519cfa82bc$var$createArticlesElements","map","title","description","url","urlToImage","join","$1bab9c519cfa82bc$var$createPagesElements","pagesElements","i","$1bab9c519cfa82bc$var$calculatePagination","Math","floor","$1bab9c519cfa82bc$var$render","container","content","innerHTML","insertAdjacentHTML","addEventListener","e","value","elements","pageElements","preventDefault","target","className","dataset","page","Number"],"version":3,"file":"pagination.cb413477.js.map"}