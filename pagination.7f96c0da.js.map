{"mappings":"YAAA,IAGIA,EAAc,EACdC,OAAaC,EAEXC,EAAeC,SAASC,eAAe,iBACvCC,EAAiBF,SAASC,eAAe,YACzCE,EAAcH,SAASC,eAAe,mBACtCG,EAAoBJ,SAASC,eAAe,YAC5CI,EAAsBL,SAASC,eAAe,cA4CpD,SAASK,EAASC,GACd,IAAMC,EAAS,uCAAuEC,OAAhCF,EAAM,4BAA8CE,OAvD9F,mCAuDkF,cAA6BA,OAtD9G,EAsDsG,UAAoBA,OAAZb,GAE3H,OAAOc,MAAMC,IAAIH,GACbI,MAAK,SAAAC,G,OAAOA,EAAIC,I,IAChBF,MAAK,SAAAG,GACL,MAAO,CAACC,SADOD,EAARC,SACWC,aADWF,EAAZE,a,IAGjBC,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E,IAGnC,SAASG,EAAwBN,GAC7B,OAAOA,EAASO,KAAI,SAAAR,G,IAAES,EAAKT,EAALS,MAAOC,EAAWV,EAAXU,YAAaC,EAAGX,EAAHW,IAAKC,EAAUZ,EAAVY,WAC7C,MAAO,qCAEAlB,OADDe,EAAM,sBAEAf,OADLgB,EAAY,4BACahB,OAApBkB,EAAW,WACZlB,OADqBe,EAAM,sCACvBf,OAAJiB,EAAI,+D,IAEdE,KAAK,G,CAaZ,SAASC,IAGL,IAFA,IAAIC,EAAgB,GAEXC,EAAI,EAAGA,GAAKlC,EAAYkC,GAAK,EACpCD,GAAiB,iEAAsErB,OAALsB,EAAE,KAAKtB,OAAFsB,EAAE,aAG3F,OAAOD,C,CAOT,SAASE,EAAoBf,GAC3BpB,EAAaoC,KAAKC,OAAOjB,EAAe,IAAM,IAAMA,GApGvC,E,CA4Gf,SAASkB,EAAQC,EAAWC,GAC1BD,EAAUE,UAAY,GACtBF,EAAUG,mBAAmB,YAAaF,E,CAnG9CtC,EAAayC,iBAAiB,SAAS,SAAAC,GAClCnC,EAAQH,EAAYuC,OAAO9B,MAAK,SAAAG,G,IAAEC,EAAQD,EAARC,SAC/BgB,EADqDjB,EAAZE,cAEzC,IAAM0B,EAAWrB,EAAuBN,GAClC4B,EAAef,IAErBM,EAAO9B,EAAqBuC,GAC5BT,EAAO/B,EAAmBuC,E,OAMlCtC,EAAoBmC,iBAAiB,SAAS,SAAAC,GAC1CA,EAAEI,iBACyB,cAAvBJ,EAAEK,OAAOC,YAEbnD,EAAc6C,EAAEK,OAAOE,QAAQC,KAE/B3C,EAAQH,EAAYuC,OAAO9B,MAAK,SAAAG,G,IAAEC,EAAQD,EAARC,SAC9BgB,EADoDjB,EAAZE,cAGxC,IAAM0B,EAAWrB,EAAuBN,GAClC4B,EAAef,IAErBM,EAAO9B,EAAqBuC,GAC5BT,EAAO/B,EAAmBuC,E,QAKlCzC,EAAesC,iBAAiB,SAAS,SAAAC,GACjC7C,EAAcC,IAElBD,EAAcsD,OAAOtD,GAAe,EAEpCU,EAAQH,EAAYuC,OAAO9B,MAAK,SAAAG,G,IACxB4B,EAAWrB,EADuBP,EAARC,UAEhCZ,EAAkBmC,mBAAmB,YAAaI,E","sources":["src/js/pagination.js"],"sourcesContent":["const API_KEY = '1d289197590b4695af2157c664a54f22';\nconst PageSize = 8;\n\nlet currentPage = 1;\nlet totalPages = undefined;\n\nconst searchBtnRef = document.getElementById('searchControl');\nconst loadMoreBtnRef = document.getElementById('loadMore');\nconst searchField = document.getElementById('searchNameField');\nconst articlesContainer = document.getElementById('articles');\nconst paginationContainer = document.getElementById('pagination');\n\nsearchBtnRef.addEventListener('click', e => {\n     getNews(searchField.value).then(({articles, totalResults}) => {\n        calculatePagination(totalResults);\n        const elements = createArticlesElements(articles);\n        const pageElements = createPagesElements();\n\n        render(paginationContainer, pageElements);\n        render(articlesContainer, elements);\n     });\n\n    \n});\n\npaginationContainer.addEventListener('click', e => {\n    e.preventDefault();\n    if (e.target.className !== \"page-link\") return\n\n    currentPage = e.target.dataset.page;\n\n    getNews(searchField.value).then(({articles, totalResults}) => {\n        calculatePagination(totalResults)\n\n        const elements = createArticlesElements(articles);\n        const pageElements = createPagesElements();\n\n        render(paginationContainer, pageElements);\n        render(articlesContainer, elements);\n\n    });\n})\n\nloadMoreBtnRef.addEventListener('click', e => {\n    if (currentPage > totalPages) return\n\n    currentPage = Number(currentPage) + 1;\n\n    getNews(searchField.value).then(({articles}) => {\n      const elements = createArticlesElements(articles);\n      articlesContainer.insertAdjacentHTML('beforeend', elements);\n    });\n})\n\nfunction getNews (query) {\n    const urlAPI = `https://newsapi.org/v2/everything?q=${query}&from=2022-12-01&apiKey=${API_KEY}&pageSize=${PageSize}&page=${currentPage}`;\n\n    return axios.get(urlAPI)\n       .then(res => res.data)\n       .then(({articles, totalResults}) => {\n        return {articles, totalResults}\n       })\n       .catch(error => console.log(error))\n}\n\nfunction createArticlesElements (articles) {\n    return articles.map(({title, description, url, urlToImage}) => {\n      return `<article class=\"news\">\n      <h2>${title}</h2>\n      <div>${description}</div>\n      <img src=\"${urlToImage}\" alt=\"${title}\" loading=\"lazy\">\n      <a href=\"${url}\" class=\"news-link\" target=\"_blank\">more</a>\n    </article>`;\n    }).join('');\n  }\n\n// function calculatePagination(totalResults) {\n//     totalPages = Math.ceil(totalResults / PageSize)\n//     renderPagination()\n\n// }\n\n/**\n * createPagesElements\n * @returns {string} Рядок з елементами кнопок пагінації\n */\nfunction createPagesElements () {\n    let pagesElements = '';\n    \n    for (let i = 1; i <= totalPages; i += 1 ) {\n      pagesElements += `<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data-page=${i}>${i}</a></li>`\n    }\n  \n    return pagesElements\n  }\n  \n  /**\n   * calculatePagination. Підраховує кількість сторінок\n   * @param {Number} totalResults \n   */\n  function calculatePagination(totalResults) {\n    totalPages = Math.floor((totalResults > 100 ? 100 : totalResults) / PageSize)\n  }\n  \n  /**\n   * Очищає контейнер і вставляє туди новий контент\n   * @param {HTMLElement} container \n   * @param {String} content \n   */\n  function render (container, content) {\n    container.innerHTML = '';\n    container.insertAdjacentHTML('beforeend', content)\n  }\n\n\n"],"names":["$dfaf77c789ce7a24$var$currentPage","$dfaf77c789ce7a24$var$totalPages","undefined","$dfaf77c789ce7a24$var$searchBtnRef","document","getElementById","$dfaf77c789ce7a24$var$loadMoreBtnRef","$dfaf77c789ce7a24$var$searchField","$dfaf77c789ce7a24$var$articlesContainer","$dfaf77c789ce7a24$var$paginationContainer","$dfaf77c789ce7a24$var$getNews","query","urlAPI","concat","axios","get","then","res","data","param","articles","totalResults","catch","error","console","log","$dfaf77c789ce7a24$var$createArticlesElements","map","title","description","url","urlToImage","join","$dfaf77c789ce7a24$var$createPagesElements","pagesElements","i","$dfaf77c789ce7a24$var$calculatePagination","Math","floor","$dfaf77c789ce7a24$var$render","container","content","innerHTML","insertAdjacentHTML","addEventListener","e","value","elements","pageElements","preventDefault","target","className","dataset","page","Number"],"version":3,"file":"pagination.7f96c0da.js.map"}